# 다형성

- 객체지향 프로그래밍의 3대 특징 중 하나로 **여러개의 형태**를 갖는다는 의미
- 상속을 이용한 기술로 부모 타입으로부터 파생된 여러가지 타입의 객체를 부모 클래스 타입 하나로 다룰 수 있는 기술

<img src="C:\Users\hoon3\Git\TIL\Java\image\Java13_다형성_01.png" alt="image-20220419090852235" style="zoom:67%;" />

- **업캐스팅** : 상속 관계에 있는 부모, 자식 클래스 간에 부모타입의 참조형 변수가 모든 자식 타입의 객체 주소를 받을 수 있음
  업캐스팅 된 후손의 정보는 원래 부모타입이었던 멤버(필드, 메서드)만 참조 가능

- **다운 캐스팅** : 자식 객체의 주소를 받은 부모 참조형 변수를 가지고 자식의 멤버를 참조해야 할 경우, 부모 클래스 타입의 참조형 변수를 자식 클래스 타입으로 형 변환 하는 것 
  자동으로 처리되지 않기에 반드시 후손 타입 명시해서 형 변환

- instanceof 연산자
  현재 참조형 변수가 어떤 클래스 형의 객체 주소를 참조하고 있는지 확인 할 때 사용
  클래스 타입이 맞으면 true, 맞지 않으면 false 반환

- 결국 하나의 부모 클래스 타입에 여러 타입의 자식 객체를 넣는 것이 가능
  다형성을 이용하여 메소드 호출 시 부모타입 변수 하나만 사용해 여러 자식 타입의 객체를 받을 수 있음

  ```java
  public void execut() {
      driveCar(new Sonata());
      driveCar(new Avante());
      driveCar(new Grandure());
  }
  
  public void driveCar(Car C) {}
  ```

**바인딩**

- 실제 실행할 메소드 코드와 호출하는 코드를 연결 시키는 것
  프로그램이 실행되기 전에 컴파일이 되면서 모든 메소드는 정적 바인딩이 됨

- **동적 바인딩** : 컴파일 시 정적 바인딩된 메서드를 실행할 당시의 객체 타입을 기준으로 바인딩 되는 것

- 동적 바인딩의 성립 요건

  상속 관계로 이루어져 다형성이 적용된 경우, 메서드 오버라이딩이 되어 있으면 정적으로 바인딩 된 메서드 코드보다 오버라이딩 된 메서드 코드를 우선적으로 수행

# 추상 클래스

추상 메서드(abstract method)
 - 몸체 없는 메서드 `ex) public void test();` ({} 가 없음)
 - 추상 메서드의 선언부에 abstract 키워드 사용 가능 `[접근제한자] abstract 반환형 메서드명(자료형 변수명);`
 - 상속 시 반드시 구형해야 하는, 오버라이딩이 강제화 되는 메서드

추상 클래스(abstract class)

- 추상 메서드를 포함한 클래스 `[접근제한자] abstract class 클래스명 {}`
- 추상 클래스 일 경우 선언부에 abstract 키워드 이용

추상 클래스 특징 및 장점

- 특징
  1. 미완성 클래스(abstract 키워드 사용)
     자체적으로 객체 생성 불가 -> 반드시 상속하여 객체 생성
  2. abstract 메서드가 포함된 클래스는 반드시 abstract 클래스이며, abstract 메서드가 없어도 abstract 클래스 선언 가능
  3. 클래스 내에 일반 변수, 메서드 포함 가능
  4. 개체 생성은 안되지만 참조형 변수 타입으로는 사용 가능
- 장점
  1. 일관된 인터페이스 제공
  2. 꼭 필요한 기능 강제화(공통적이나 자식클래스에서 특수화 되는 기능)

# 인터페이스

- 상수형 필드와 추상 메서드만 작성할 수 있는 추상 클래스의 변형체
- 메서드의 통일성을 부여하기 위해 추상 메서드만 따로 모아놓은 것으로 상속 시 인터페이스 내에 정의된 모든 추상메서드 구현해야 함

```java
[접근제한자] interface 인터페이스명 {
    //상수도 멤버로 포함 가능
    public static final 자료형 변수명 = 초기값;
    //추상 메서드만 선언 가능
    [public abstract] 반환자료형 메서드명([자료형 매개변수]);
    //public abstract가 생략되기 때문에 오버라이딩 시 반드시 public 표기해야 함
}
```

- 특징
  1. 모든 인터페이스의 메서드는 묵시적으로 public이고 abstract
  2. 변수는 묵시적으로 public static final 따라서 인터페이스 변수의 값 변경 시도 시 컴파일 에러
  3. 객체 생성은 안되나 참조형 변수로는 가능
- 장점
  1. 상위 타입 역할로 다형성을 지원하여 연결
  2. 해당 객체가 다양한 기능 제공 시에도 인터페이스에 해당하는 기능만을 사용하게 제한 가능
  3. 공통 기능 상의 일관성 제공
  4. 공동 작업을 위한 인터페이스 제공

|    구분     |       추상 클래스        |       인터페이스       |
| :---------: | :----------------------: | :--------------------: |
|    상속     |        단일 상속         |       다중 상속        |
|    구현     |       extends 사용       |    implements 사용     |
| 추상 메서드 | abstract 메서드 0개 이상 | 모든 메서드는 abstract |
|  abstract   |       명시적 사용        |  묵시적으로 abstract   |
|    객체     |      객체 생성 불가      |     객체 생성 불가     |
|    용도     |        참조 타입         |       참조 타입        |



